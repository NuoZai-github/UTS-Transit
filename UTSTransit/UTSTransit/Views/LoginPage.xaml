<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:UTSTransit.ViewModels"
             x:Class="UTSTransit.Views.LoginPage"
             x:DataType="vm:LoginViewModel"
             Shell.NavBarIsVisible="False">

    <Grid>
        <!-- Centered Content -->
        <VerticalStackLayout VerticalOptions="Center" 
                             HorizontalOptions="Center" 
                             Spacing="24" 
                             WidthRequest="320">

            <!-- Logo Area -->
            <Image Source="dotnet_bot.png" 
                   HeightRequest="64" 
                   WidthRequest="64" 
                   HorizontalOptions="Center"
                   Margin="0,0,0,8"/>

            <Label Text="Welcome back" 
                   Style="{StaticResource HeaderLabel}" />

            <!-- Inputs -->
            <VerticalStackLayout Spacing="12">
                <Border Style="{StaticResource InputBorder}">
                    <Entry Placeholder="Email address"
                           Text="{Binding Email}"
                           Keyboard="Email" />
                </Border>

                <Border Style="{StaticResource InputBorder}">
                    <Entry Placeholder="Password"
                           Text="{Binding Password}"
                           IsPassword="True" />
                </Border>
            </VerticalStackLayout>

            <!-- Error Message -->
            <Label Text="{Binding StatusMessage}"
                   TextColor="{StaticResource Error}"
                   HorizontalOptions="Center"
                   HorizontalTextAlignment="Center"
                   FontSize="14">
                <Label.Triggers>
                    <DataTrigger TargetType="Label" Binding="{Binding StatusMessage}" Value="">
                        <Setter Property="IsVisible" Value="False" />
                    </DataTrigger>
                    <DataTrigger TargetType="Label" Binding="{Binding StatusMessage}" Value="{x:Null}">
                        <Setter Property="IsVisible" Value="False" />
                    </DataTrigger>
                </Label.Triggers>
            </Label>

            <!-- Actions -->
            <VerticalStackLayout Spacing="16">
                <Button Text="Continue"
                        Command="{Binding LoginCommand}"
                        IsEnabled="{Binding IsNotBusy}"/>

                <ActivityIndicator IsRunning="{Binding IsBusy}"
                                   HorizontalOptions="Center" />

                <Grid ColumnDefinitions="*, Auto" Margin="0,8,0,0">
                    <Label Text="Don't have an account?" 
                           TextColor="{StaticResource TextSecondary}"
                           VerticalOptions="Center"
                           FontSize="14"/>
                    
                    <Button Grid.Column="1"
                            Text="Sign up"
                            Command="{Binding GoToSignUpCommand}"
                            Style="{StaticResource TextButton}"
                            HorizontalOptions="End"
                            Padding="0"
                            HeightRequest="30"/>
                </Grid>
                
                <Button Text="Forgot password?"
                        Command="{Binding GoToForgotPasswordCommand}"
                        Style="{StaticResource TextButton}"
                        TextColor="{StaticResource TextSecondary}"
                        FontSize="14"/>
            </VerticalStackLayout>

        </VerticalStackLayout>
    </Grid>
</ContentPage>
